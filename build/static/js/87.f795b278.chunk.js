(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[87],{757:function(e,t,a){"use strict";a.r(t);var n=a(7),s=a(5),r=a(1),o=a(67),c=a(11),i=a(33),l=a(47),u=a(13),j=a(710),d=a(300),b=a(251),m=a(247),p=a(674),h=a(501),O=a(700),x=a(245),g=a(174),f=a(41),v=a(332),w=a(66),C=a(21),S=a(289),q=a(120),y=a(2),k=Object(s.a)(j.a)((function(){return{}})),A=Object(s.a)(v.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),N=window.localStorage.getItem("accessToken"),P=function(){var e=Object(r.useState)({date:new Date}),t=Object(u.a)(e,2),a=t[0],s=t[1],o=Object(r.useState)(!1),j=Object(u.a)(o,2),P=j[0],_=j[1],E=Object(r.useState)([]),T=Object(u.a)(E,2),I=T[0],L=T[1],M=Object(r.useState)(null),H=Object(u.a)(M,2),V=H[0],z=H[1],D=P&&0===I.length,F=Object(C.f)();Object(r.useEffect)((function(){var e=!0;if(D)return Object(l.a)(Object(i.a)().mark((function t(){var a,n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/hospital");case 2:a=t.sent,n=a.data.hospitals,console.log(n),e&&(console.log(n),L(n));case 6:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[D,I]),Object(r.useEffect)((function(){P||L([])}),[P]);var R=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.role.value),console.log(V.name),console.log(V.hospital_id),console.log(t.target.userstatus.value),e.prev=4,console.log("accessToken: "+N),e.next=8,w.a.post("/users",{name:t.target.username.value,surname:t.target.surname.value,role:t.target.role.value,password:t.target.password.value,company:V.name,company_id:V.hospital_id,is_active:t.target.userstatus.value,phone:t.target.mobile.value,email:t.target.email.value,created_date:new Date,updated_at:new Date,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}});case 8:a=e.sent,"success"===a.data.status&&F("/service_provider/user"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log("error: "+e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){e.persist(),s(Object(c.a)(Object(c.a)({},a),{},Object(n.a)({},e.target.name,e.target.value)))},J=a.username,U=a.mobile,W=a.surname,G=a.password,K=a.confirmPassword,Q=a.email,X=a.role,Y=a.isActive;return Object(y.jsx)("div",{children:Object(y.jsxs)(v.ValidatorForm,{onSubmit:R,onError:function(){return null},children:[Object(y.jsxs)(d.a,{container:!0,spacing:6,children:[Object(y.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(y.jsx)(A,{type:"text",name:"username",label:"Name",onChange:B,value:J||"",validators:["required","minStringLength:1","maxStringLength: 100"],errorMessages:["this field is required","this field requires 100 characters","this field requires 100 characters"]}),Object(y.jsx)(A,{type:"email",name:"email",label:"Email",value:Q||"",onChange:B,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]}),Object(y.jsx)(A,{name:"password",type:"password",label:"Password",value:G||"",onChange:B}),Object(y.jsx)(k,{open:P,options:I,loading:D,onChange:function(e,t){console.log("newValue"),console.log(t),z(t)},id:"Hospital",onOpen:function(){return _(!0)},onClose:function(){return _(!1)},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.name===t.name},renderInput:function(e){return Object(y.jsx)(A,Object(c.a)(Object(c.a)({},e),{},{fullWidth:!0,variant:"outlined",label:"Choose Hospital",InputProps:Object(c.a)(Object(c.a)({},e.InputProps),{},{endAdornment:Object(y.jsxs)(r.Fragment,{children:[D?Object(y.jsx)(b.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}),Object(y.jsx)(q.a,{children:Object(y.jsxs)(m.a,{component:"fieldset",className:"formControl",children:[Object(y.jsx)(S.a,{component:"legend",children:"Would you like this user to be active"}),Object(y.jsxs)(p.a,{value:Y,name:"userstatus",className:"userstatus","aria-label":"User Status",onChange:B,children:[Object(y.jsx)(h.a,{value:!0,control:Object(y.jsx)(O.a,{}),label:"Active"}),Object(y.jsx)(h.a,{value:!1,control:Object(y.jsx)(O.a,{}),label:"None Active"})]})]})})]}),Object(y.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(y.jsx)(A,{type:"text",name:"surname",label:"Surname",onChange:B,value:W||"",validators:["required","minStringLength:1","maxStringLength: 100"],errorMessages:["this field is required","this field requires 100 characters","this field requires 100 characters"]}),Object(y.jsx)(A,{type:"text",name:"mobile",value:U||"",label:"Mobile Number",onChange:B,validators:["required"],errorMessages:["this field is required"]}),Object(y.jsx)(A,{type:"password",name:"confirmPassword",onChange:B,label:"Confirm Password",value:K||""}),Object(y.jsx)(q.a,{children:Object(y.jsxs)(m.a,{component:"fieldset",className:"formControl",children:[Object(y.jsx)(S.a,{component:"legend",children:"Role"}),Object(y.jsxs)(p.a,{value:X,name:"role",className:"Role","aria-label":"Role",onChange:B,children:[Object(y.jsx)(h.a,{value:"hospitals admin",control:Object(y.jsx)(O.a,{}),label:"Hospital Admin"}),Object(y.jsx)(h.a,{value:"hospitals staff",control:Object(y.jsx)(O.a,{}),label:"Hospital Staff"})]})]})})]})]}),Object(y.jsxs)(x.a,{color:"primary",variant:"contained",type:"submit",children:[Object(y.jsx)(g.a,{children:"send"}),Object(y.jsx)(f.i,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]})]})})},_=Object(s.a)("div")((function(e){var t=e.theme;return Object(n.a)({margin:"30px"},t.breakpoints.down("sm"),{margin:"16px"})}));t.default=function(){return Object(y.jsx)(r.Fragment,{children:Object(y.jsx)(_,{className:"hospitals-add-user-form",children:Object(y.jsx)(o.l,{title:"Add User",children:Object(y.jsx)(P,{})})})})}}}]);