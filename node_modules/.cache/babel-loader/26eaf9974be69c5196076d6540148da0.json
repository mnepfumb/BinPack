{"ast":null,"code":"import _objectSpread from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import{TimePicker}from\"@mui/lab\";import AdapterDateFns from\"@mui/lab/AdapterDateFns\";import LocalizationProvider from\"@mui/lab/LocalizationProvider\";import{Button,Table,TableBody,TableCell,TableHead,TableRow,Grid,Icon,Autocomplete,Box,styled,Card,Divider}from\"@mui/material\";import{Span,H1,H2,H3,H5,Small}from\"app/components/Typography\";import{useEffect,useState}from\"react\";import{TextValidator,ValidatorForm}from\"react-material-ui-form-validator\";import React from'react';import{useNavigate,useLocation}from'react-router-dom';import SimpleCard from'app/components/SimpleCard';import axios from'app/api/axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AutoComplete=styled(Autocomplete)(function(){return{};});var TextField=styled(TextValidator)(function(){return{width:\"100%\",marginBottom:\"16px\"};});var CardRoot=styled(Card)(function(_ref){var theme=_ref.theme;return _defineProperty({marginBottom:'24px',padding:'24px !important'},theme.breakpoints.down('sm'),{paddingLeft:'16px !important'});});var CardHeader=styled(Box)(function(){return{display:'flex',paddingLeft:'24px',paddingRight:'24px',marginBottom:'12px',alignItems:'center',justifyContent:'space-between'};});var Title=styled('span')(function(){return{fontSize:'1rem',fontWeight:'500',textTransform:'capitalize'};});var ProductTable=styled(Table)(function(){return{minWidth:400,whiteSpace:'pre','& small':{width:50,height:15,borderRadius:500,boxShadow:'0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)'},'& td':{borderBottom:'none'},'& td:first-of-type':{paddingLeft:'16px !important'}};});var EditManifest=function EditManifest(){var _useState=useState({date:new Date()}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var navigate=useNavigate();var manifest=useLocation();var _React$useState=React.useState(// new Date('2014-08-18T21:11:54')\nmanifest.state.manifest.time_in),_React$useState2=_slicedToArray(_React$useState,2),selectedTimeIn=_React$useState2[0],setSelectedTimeIn=_React$useState2[1];var _React$useState3=React.useState(// new Date('2014-08-18T21:11:54')\nmanifest.state.manifest.time_out),_React$useState4=_slicedToArray(_React$useState3,2),selectedTimeOut=_React$useState4[0],setSelectedTimeOut=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),manifeststatus=_React$useState6[0],setManifeststatus=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),wastestatus=_React$useState8[0],setWastestatus=_React$useState8[1];var handleManifeststatus=function handleManifeststatus(_,newValue){if(newValue&&newValue.inputValue){setManifeststatus({label:newValue.inputValue});return;}setManifeststatus(newValue);};var handleWastestatus=function handleWastestatus(_,newValue){if(newValue&&newValue.inputValue){setWastestatus({label:newValue.inputValue});return;}setWastestatus(newValue);};var onClick=function onClick(){return navigate(-1);};console.log(\"EditManifest manifest: \"+manifest.state.manifest.requisition_id);useEffect(function(){ValidatorForm.addValidationRule(\"isPasswordMatch\",function(value){if(value!==state.password)return false;return true;});return function(){return ValidatorForm.removeValidationRule(\"isPasswordMatch\");};},[state.password]);var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var Waste_Disposed,Waste_Diverted,Waste_Collected,accessToken,url,response,_response$data,status,manifests;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Waste_Disposed=false;Waste_Diverted=false;Waste_Collected=false;_context.prev=3;if(wastestatus==='Waste Disposed'){Waste_Disposed=true;}else if(wastestatus==='Waste Diverted'){Waste_Diverted=true;}if(manifeststatus==='Waste Collected'){Waste_Collected=true;}accessToken=window.localStorage.getItem('accessToken');console.log(\"accessToken: \"+accessToken);url='/manifest/'+manifest.state.manifest._id;console.log(\"url: \"+url);_context.next=12;return axios.patch(url,{status:manifeststatus.label,operator_in:event.target.operator_in.value,operator_out:event.target.operator_out.value,landfill:event.target.landfill.value,notes:event.target.notes.value,wasteType:event.target.wasteType.value,treatment:event.target.treatment.value,bin_location:event.target.bin_location.value,bin_qty:event.target.bin_qty.value,bin_size:event.target.bin_size.value,waste_mass:event.target.waste_mass.value,time_in:selectedTimeIn,time_out:selectedTimeOut,updated_at:new Date(),wasteDiverted:Waste_Diverted,wasteDisposed:Waste_Disposed,wasteCollected:Waste_Collected,headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}// withCredentials: true\n});case 12:response=_context.sent;_response$data=response.data,status=_response$data.status,manifests=_response$data.manifests;console.log(\"manifests: \"+manifests);if(status==='success'){navigate(-1);}_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](3);console.log(\"error: \"+_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[3,18]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();var handleChange=function handleChange(event){event.persist();setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},event.target.name,event.target.value)));};function handleTimeIn(date){setSelectedTimeIn(date);}function handleTimeOut(date){setSelectedTimeOut(date);}var _state$operator_in=state.operator_in,operator_in=_state$operator_in===void 0?manifest.state.manifest.operator_in:_state$operator_in,_state$operator_out=state.operator_out,operator_out=_state$operator_out===void 0?manifest.state.manifest.operator_out:_state$operator_out,_state$landfill=state.landfill,landfill=_state$landfill===void 0?manifest.state.manifest.landfill:_state$landfill,_state$notes=state.notes,notes=_state$notes===void 0?manifest.state.manifest.notes:_state$notes,_state$wasteType=state.wasteType,wasteType=_state$wasteType===void 0?manifest.state.manifest.wasteType:_state$wasteType,_state$treatment=state.treatment,treatment=_state$treatment===void 0?manifest.state.manifest.treatment:_state$treatment,_state$bin_location=state.bin_location,bin_location=_state$bin_location===void 0?manifest.state.manifest.bin_location:_state$bin_location,_state$bin_qty=state.bin_qty,bin_qty=_state$bin_qty===void 0?manifest.state.manifest.bin_qty:_state$bin_qty,_state$bin_size=state.bin_size,bin_size=_state$bin_size===void 0?manifest.state.manifest.bin_size:_state$bin_size,_state$waste_mass=state.waste_mass,waste_mass=_state$waste_mass===void 0?manifest.state.manifest.waste_mass:_state$waste_mass;return/*#__PURE__*/_jsx(CardRoot,{children:/*#__PURE__*/_jsx(SimpleCard,{elevation:0,children:/*#__PURE__*/_jsx(CardRoot,{children:/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:handleSubmit,onError:function onError(){return null;},children:[/*#__PURE__*/_jsx(Box,{ml:\"-5px\",style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",onClick:onClick,children:/*#__PURE__*/_jsx(Span,{sx:{pl:1,textTransform:\"capitalize\"},children:\"Back\"})})}),/*#__PURE__*/_jsx(Divider,{sx:{my:5}}),/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(H1,{children:[\"Manifest    \",/*#__PURE__*/_jsx(Title,{children:\"Edit\"})]})}),/*#__PURE__*/_jsx(Divider,{sx:{my:5}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,lg:6,md:6,sm:12,xs:12,children:[/*#__PURE__*/_jsx(H2,{children:manifest.state.manifest.company_name}),/*#__PURE__*/_jsx(H5,{children:manifest.state.manifest.requisition_id})]}),/*#__PURE__*/_jsx(Grid,{item:true,lg:6,md:6,sm:12,xs:12,style:{alignSelf:'flex-end'},children:/*#__PURE__*/_jsxs(Box,{ml:\"-5px\",style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(AutoComplete,{value:manifeststatus,options:manifest_status,onChange:handleManifeststatus,getOptionLabel:function getOptionLabel(option){return option.label;},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Manifest Status\",variant:\"outlined\"}));}}),/*#__PURE__*/_jsxs(H5,{children:[\"Manifest Date:  \",/*#__PURE__*/_jsx(Small,{style:{marginLeft:'2.5rem'},children:manifest.state.manifest.created_date})]})]})})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:5}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,lg:6,md:6,sm:12,xs:12,children:[/*#__PURE__*/_jsx(H3,{children:\"Collection \"}),/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"operator_in\",label:\"Operator In\",onChange:handleChange,value:operator_in||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n}),/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(Grid,{container:true,sx:{width:'60%'},justify:\"space-around\",children:/*#__PURE__*/_jsx(TimePicker,{value:selectedTimeIn,onChange:handleTimeIn,renderInput:function renderInput(props){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},props),{},{variant:\"standard\",id:\"time_in\",label:\"Time In\"}));}})})}),/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"operator_out\",label:\"Operator Out\",onChange:handleChange,value:operator_out||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n}),/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(Grid,{container:true,sx:{width:'60%'},justify:\"space-around\",children:/*#__PURE__*/_jsx(TimePicker,{value:selectedTimeOut,onChange:handleTimeOut,renderInput:function renderInput(props){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},props),{},{variant:\"standard\",id:\"time_out\",label:\"Time Out\"}));}})})})]}),/*#__PURE__*/_jsx(Grid,{item:true,lg:6,md:6,sm:12,xs:12,style:{alignSelf:'flex-end'},children:/*#__PURE__*/_jsxs(Box,{ml:\"-5px\",style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(H3,{children:\"Disposal\"}),/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"landfill\",label:\"Landfill\",onChange:handleChange,value:landfill||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n}),/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"notes\",label:\"Notes\",onChange:handleChange,value:notes||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n})]})})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:5}}),/*#__PURE__*/_jsx(Card,{elevation:3,sx:{pt:'20px',mb:3},children:/*#__PURE__*/_jsx(Box,{overflow:\"auto\",children:/*#__PURE__*/_jsxs(ProductTable,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:2,children:\"Waste Type\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:2,children:\"Treatment\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:2,children:\"Bin Location\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:2,children:\"Bin Qty\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:2,children:\"Bin Sizes\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:2,children:\"Mass (Kg)\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:2,children:\"Waste Status\"})]})}),/*#__PURE__*/_jsx(TableBody,{\"border-spacing\":\"0 15px\",children:/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{colSpan:2,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"wasteType\",label:\"WasteType\",onChange:handleChange,value:wasteType||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n})})}),/*#__PURE__*/_jsx(TableCell,{colSpan:2,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"treatment\",label:\"Treatment\",onChange:handleChange,value:treatment||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n})})}),/*#__PURE__*/_jsx(TableCell,{colSpan:2,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"bin_location\",label:\"Bin Location\",onChange:handleChange,value:bin_location||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n})})}),/*#__PURE__*/_jsx(TableCell,{colSpan:2,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"bin_qty\",label:\"Bin Qty\",onChange:handleChange,value:bin_qty||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n})})}),/*#__PURE__*/_jsx(TableCell,{colSpan:2,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"bin_size\",label:\"Bin Size\",onChange:handleChange,value:bin_size||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n})})}),/*#__PURE__*/_jsx(TableCell,{colSpan:2,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"waste_mass\",label:\"Waste Mass\",onChange:handleChange,value:waste_mass||\"\"// validators={[\"required\",  \"minStringLength:1\", \"maxStringLength: 100\"]}\n// errorMessages={[\"this field is required\", \"this field requires 100 characters\", \"this field requires 100 characters\"]}\n})})}),/*#__PURE__*/_jsx(TableCell,{colSpan:2,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(Box,{alignItems:\"left\",children:/*#__PURE__*/_jsx(AutoComplete,{value:wastestatus,onChange:handleWastestatus,options:waste_status,getOptionLabel:function getOptionLabel(option){return option.label;},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Waste Status\",variant:\"outlined\"}));}})})})]})})]})})}),/*#__PURE__*/_jsx(Divider,{sx:{my:5}}),/*#__PURE__*/_jsxs(Box,{ml:\"-5px\",style:{textAlign:'right'},children:[/*#__PURE__*/_jsxs(H5,{children:[\"Total Mass (Kg):  \",/*#__PURE__*/_jsx(Small,{style:{marginLeft:'2.5rem'},children:manifest.waste_mass})]}),/*#__PURE__*/_jsxs(H5,{children:[\"Tonnage Charged:  \",/*#__PURE__*/_jsx(Small,{style:{marginLeft:'2.5rem'},children:manifest.waste_mass})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:5}}),/*#__PURE__*/_jsx(Box,{ml:\"-5px\",style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(Button,{color:\"primary\",variant:\"contained\",type:\"submit\",children:[/*#__PURE__*/_jsx(Icon,{children:\"send\"}),/*#__PURE__*/_jsx(Span,{sx:{pl:1,textTransform:\"capitalize\"},children:\"Submit\"})]})})]})})})});};var manifest_status=[{label:'Awaiting Acceptance'},{label:'Assigned to Driver'},{label:'Waste Collected'},{label:'En Route to Sorting'},{label:'En Route to Landfill'},{label:'En Route to Scrapyard/Recycling Deport'},{label:'Sorting Facility'},{label:'Handed Over'},{label:'Waste Disposed'}];var waste_status=[{label:'Waste Disposed'},{label:'Waste Diverted'}//   { label: 'Waste Collected' },\n];export default EditManifest;","map":null,"metadata":{},"sourceType":"module"}