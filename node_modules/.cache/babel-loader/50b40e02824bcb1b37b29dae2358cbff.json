{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import{Box,Button,Card,styled,Grid,Divider}from'@mui/material';import{convertHexToRGB}from'app/utils/utils';import{Small,H2,H3,H4}from'app/components/Typography';import axios from'app/api/axios';import useAuth from'app/hooks/useAuth';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardRoot=styled(Card)(function(_ref){var theme=_ref.theme;return _defineProperty({marginBottom:'24px',padding:'24px !important'},theme.breakpoints.down('sm'),{paddingLeft:'16px !important'});});var StyledCard=styled(Card)(function(_ref3){var theme=_ref3.theme;return _defineProperty({boxShadow:'none',textAlign:'center',position:'relative',padding:'24px !important',background:\"rgb(\".concat(convertHexToRGB(theme.palette.primary.main),\", 0.15) !important\")},theme.breakpoints.down('sm'),{padding:'16px !important'});});var StyledCard2=styled(Card)(function(_ref5){var theme=_ref5.theme;return _defineProperty({boxShadow:'none',textAlign:'left',position:'relative',padding:'24px !important',background:\"rgb(\".concat(convertHexToRGB(theme.palette.primary.main),\", 0.15) !important\")},theme.breakpoints.down('sm'),{padding:'16px !important'});});var accessToken=window.localStorage.getItem('accessToken');var DetailsCard=function DetailsCard(_ref7){var requisition=_ref7.requisition;var _useAuth=useAuth(),user=_useAuth.user;var navigate=useNavigate();var onClickGenerateManifest=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,_response$data,status,manifests,requisition_url,_response,_response$data2,_status,requisitions;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('requisition.requisition_id: '+requisition.requision_id);url='/manifest';_context.next=5;return axios.post(url,{company_name:requisition.serviceProviderName,wasteType:'',wasteCategory:'',incident:false,incident_type:'',incident_notes:'',waste_generator_id:'',user_id:'',created_date:new Date(),requisition_id:requisition.requision_id,status:'',driver_id:user.id,expected_qty:requisition.expected_qty,operator_in:'',operator_out:'',operator_name:'',landfill:'',notes:'',time_in:'',time_out:'',treatment:'',bin_location:'',bin_qty:'',bin_size:'',waste_mass:'',wasteCollected:false,wasteDiverted:false,wasteDisposed:false,updated_at:new Date(),headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}});case 5:response=_context.sent;_response$data=response.data,status=_response$data.status,manifests=_response$data.manifests;if(!(status==='success')){_context.next=14;break;}// setOpen(true);\n//   navigate('/netcare/admin/user');\nrequisition_url='/requisition/'+requisition._id;_context.next=11;return axios.patch(requisition_url,{createManifest:true,updated_at:new Date(),headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}});case 11:_response=_context.sent;_response$data2=_response.data,_status=_response$data2.status,requisitions=_response$data2.requisitions;if(_status==='success'){navigate(-1);}case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log('patch_error2: '+_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function onClickGenerateManifest(){return _ref8.apply(this,arguments);};}();var GenerateManifestButton=function GenerateManifestButton(requisition){if(!requisition.createManifest){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,lg:6,md:6,sm:12,xs:12,children:/*#__PURE__*/_jsx(Button,{size:\"large\",color:\"primary\",variant:\"contained\",sx:{textTransform:'uppercase'},onClick:onClickGenerateManifest,children:\"Generate Manifest\"})}),/*#__PURE__*/_jsx(Grid,{item:true,lg:6,md:6,sm:12,xs:12})]});}};return/*#__PURE__*/_jsx(CardRoot,{children:/*#__PURE__*/_jsxs(StyledCard,{elevation:0,children:[/*#__PURE__*/_jsxs(H3,{children:[\"ID: \",requisition.requision_id]}),/*#__PURE__*/_jsx(Divider,{sx:{my:3}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,lg:6,md:3,sm:12,xs:12,children:/*#__PURE__*/_jsx(StyledCard2,{children:/*#__PURE__*/_jsxs(Box,{ml:\"-5px\",children:[/*#__PURE__*/_jsxs(H4,{children:[\"To: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.serviceProviderName})]}),/*#__PURE__*/_jsxs(H4,{children:[\"WasteType: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.wasteType})]}),/*#__PURE__*/_jsxs(H4,{children:[\"Requestor: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.hospitalName})]}),/*#__PURE__*/_jsxs(H4,{children:[\"Creation Date: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.created_date})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,lg:6,md:6,sm:12,xs:12,children:/*#__PURE__*/_jsx(StyledCard2,{children:/*#__PURE__*/_jsxs(Box,{ml:\"-5px\",children:[/*#__PURE__*/_jsxs(H4,{children:[\"Collection Address: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.collection_address})]}),/*#__PURE__*/_jsxs(H4,{children:[\"Bin Location: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.bin_location})]}),/*#__PURE__*/_jsxs(H4,{children:[\"Expected qty: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.expected_qty})]}),/*#__PURE__*/_jsxs(H4,{children:[\"Colletion Date: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.collection_Date})]})]})})}),/*#__PURE__*/_jsx(Divider,{sx:{my:3}}),GenerateManifestButton(requisition)]})]})});};export default DetailsCard;","map":null,"metadata":{},"sourceType":"module"}