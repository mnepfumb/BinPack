{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,Card,Icon,IconButton,styled,Table,TableBody,TableCell,TableHead,TableRow,Fab}from'@mui/material';import{useNavigate,Link}from'react-router-dom';import DeactivateUserDialog from'./DeactivateUserDialog';import ActivateUserDialog from'./ActivateUserDialog';import SimpleCard from'app/components/SimpleCard';import{useEffect,useState}from'react';import axios from'app/api/axios';import SimpleDateTime from'react-simple-timestamp-to-date';import useAuth from'app/hooks/useAuth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardHeader=styled(Box)(function(){return{display:'flex',paddingLeft:'24px',paddingRight:'24px',marginBottom:'12px',alignItems:'center',justifyContent:'space-between'};});var Title=styled('span')(function(){return{fontSize:'1rem',fontWeight:'500',textTransform:'capitalize'};});var ProductTable=styled(Table)(function(){return{minWidth:400,whiteSpace:'pre','& small':{width:50,height:15,borderRadius:500,boxShadow:'0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)'},'& td':{borderBottom:'none'},'& td:first-of-type':{paddingLeft:'16px !important'}};});var UserTable=function UserTable(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useAuth=useAuth(),user=_useAuth.user;var navigate=useNavigate();var fetchHospitalData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,url,response,_response$data,status,_users,company_id,_response,_response$data2,_status,_users2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;accessToken=window.localStorage.getItem('accessToken');console.log('accessToken: '+accessToken);console.log('user.id: '+user.id);url=\"/users/\".concat(user.id);_context.next=7;return axios.get(url,{headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}});case 7:response=_context.sent;_response$data=response.data,status=_response$data.status,_users=_response$data.users;console.log('users: '+_users);if(!(status==='success')){_context.next=26;break;}company_id=_users.company_id;console.log('company_id: '+company_id);_context.prev=13;url='/users/userfield?company_id='+company_id;_context.next=17;return axios.get(url,{headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}// withCredentials: true\n});case 17:_response=_context.sent;_response$data2=_response.data,_status=_response$data2.status,_users2=_response$data2.users;console.log('users: '+_users2);if(_status==='success'){console.log(\"user.is_active: \".concat(_users2[0].is_active));setUsers(_users2);}_context.next=26;break;case 23:_context.prev=23;_context.t0=_context[\"catch\"](13);console.log('error: '+_context.t0);case 26:_context.next=31;break;case 28:_context.prev=28;_context.t1=_context[\"catch\"](0);console.log('error: '+_context.t1);case 31:case\"end\":return _context.stop();}}},_callee,null,[[0,28],[13,23]]);}));return function fetchHospitalData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchHospitalData();},[]);var onClick=function onClick(){return navigate('/netcare/hospital/user-add-form');};var renderTest=function renderTest(check,user){if(check){return/*#__PURE__*/_jsx(DeactivateUserDialog,{user:user});}else{return/*#__PURE__*/_jsx(ActivateUserDialog,{user:user});}};var renderAuthIcon=function renderAuthIcon(check,user){if(check){return/*#__PURE__*/_jsx(Icon,{className:\"icon\",style:{color:'#08ad6c',size:42},children:\"check\"});}else{return/*#__PURE__*/_jsx(Icon,{className:\"icon\",style:{color:'#FF3D57',size:42},children:\"clear\"});}};return/*#__PURE__*/_jsx(Card,{elevation:3,sx:{pt:'20px',mb:3},children:/*#__PURE__*/_jsxs(SimpleCard,{children:[/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsx(Title,{children:\"Hospitals' User List\"}),/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"Add\",className:\"button\",onClick:onClick,children:/*#__PURE__*/_jsx(Icon,{children:\"add\"})})]}),/*#__PURE__*/_jsx(Box,{overflow:\"auto\",children:/*#__PURE__*/_jsxs(ProductTable,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{sx:{px:4},colSpan:4,children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:4},colSpan:4,children:\"Surname\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:4,children:\"Phone Number\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:4,children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:4,children:\"Role\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:4,children:\"Company\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:4,children:\"Active Status\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:4,children:\"Created Date\"}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},colSpan:4,children:\"Action\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:users.map(function(user,index){return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{colSpan:4,align:\"left\",sx:{px:0,textTransform:'capitalize'},children:user.name}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",colSpan:4,sx:{px:0,textTransform:'capitalize'},children:user.surname}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",colSpan:4,sx:{px:0,textTransform:'capitalize'},children:user.phone}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",colSpan:4,sx:{px:0,textTransform:'capitalize'},children:user.email}),/*#__PURE__*/_jsx(TableCell,{sx:{px:0},align:\"left\",colSpan:4,children:user.role}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",colSpan:4,sx:{px:0,textTransform:'capitalize'},children:user.company}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",colSpan:4,sx:{px:0,textTransform:'capitalize'},children:renderAuthIcon(user.is_active,user)}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",colSpan:4,sx:{px:0,textTransform:'capitalize'},children:/*#__PURE__*/_jsx(SimpleDateTime,{dateFormat:\"YMD\",dateSeparator:\"/\",timeSeparator:\":\",children:user.updated_at})}),/*#__PURE__*/_jsxs(TableCell,{sx:{px:0},colSpan:4,children:[/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(Icon,{color:\"primary\",state:{user:user},component:Link,to:{pathname:'/netcare/hospital/user-edit-form',state:user},children:\"edit\"})}),/*#__PURE__*/_jsx(IconButton,{children:renderTest(user.is_active,user)})]})]},index);})})]})})]})});};export default UserTable;","map":null,"metadata":{},"sourceType":"module"}