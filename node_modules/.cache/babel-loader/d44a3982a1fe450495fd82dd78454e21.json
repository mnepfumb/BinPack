{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{LoadingButton}from'@mui/lab';import{Card,Checkbox,Grid,TextField}from'@mui/material';import{Box,styled,useTheme}from'@mui/system';import{Paragraph}from'app/components/Typography';import useAuth from'app/hooks/useAuth';import{Formik}from'formik';import{useState}from'react';import{NavLink,useNavigate}from'react-router-dom';import*as Yup from'yup';import axios from'app/api/axios.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FlexBox=styled(Box)(function(){return{display:'flex',alignItems:'center'};});var JustifyBox=styled(FlexBox)(function(){return{justifyContent:'center'};});var ContentBox=styled(Box)(function(){return{height:'100%',padding:'32px',position:'relative',background:'rgba(0, 0, 0, 0.01)'};});var JWTRoot=styled(JustifyBox)(function(){return{background:'#1A2038',minHeight:'100% !important','& .card':{maxWidth:800,minHeight:400,margin:'1rem',display:'flex',borderRadius:12,alignItems:'center'}};});// inital login credentials\nvar initialValues={email:'',password:'',remember:true};// form field validation schema\nvar validationSchema=Yup.object().shape({password:Yup.string().min(6,'Password must be 6 character length').required('Password is required!'),email:Yup.string().email('Invalid Email address').required('Email is required!')});var JwtLogin=function JwtLogin(){var theme=useTheme();var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useAuth=useAuth(),login=_useAuth.login;var logIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/auth',{email:email,password:password});case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function logIn(_x,_x2){return _ref.apply(this,arguments);};}();var handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(values){var Logging,accessToken,user;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.prev=1;_context2.next=4;return logIn(values.email,values.password);case 4:Logging=_context2.sent;accessToken=Logging.accessToken,user=Logging.user;console.log(\"accessToken: \"+accessToken+\" user: \"+user);_context2.next=9;return login(accessToken,user);case 9:if(user.role==='admin'){navigate('/netcare/admin/dashboard');}else if(user.role==='hospital'){navigate('/netcare/hospital/dashboard');}else if(user.role==='service provider'){navigate('/netcare/service_provider/dashboard');}else if(user.role==='driver'){navigate('/netcare/driver/dashboard');}setLoading(false);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);setLoading(false);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[1,13]]);}));return function handleFormSubmit(_x3){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(JWTRoot,{children:/*#__PURE__*/_jsx(Card,{className:\"card\",children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:6,xs:12,children:/*#__PURE__*/_jsx(JustifyBox,{p:4,height:\"100%\",sx:{minWidth:320},children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/images/logo.png\",width:\"100%\",alt:\"\"})})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:6,xs:12,children:/*#__PURE__*/_jsxs(ContentBox,{children:[/*#__PURE__*/_jsx(Formik,{onSubmit:handleFormSubmit,initialValues:initialValues,validationSchema:validationSchema,children:function children(_ref3){var values=_ref3.values,errors=_ref3.errors,touched=_ref3.touched,handleChange=_ref3.handleChange,handleBlur=_ref3.handleBlur,handleSubmit=_ref3.handleSubmit;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,size:\"small\",type:\"email\",name:\"email\",label:\"Email\",variant:\"outlined\",onBlur:handleBlur,value:values.email,onChange:handleChange,helperText:touched.email&&errors.email,error:Boolean(errors.email&&touched.email),sx:{mb:3}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,size:\"small\",name:\"password\",type:\"password\",label:\"Password\",variant:\"outlined\",onBlur:handleBlur,value:values.password,onChange:handleChange,helperText:touched.password&&errors.password,error:Boolean(errors.password&&touched.password),sx:{mb:1.5}}),/*#__PURE__*/_jsxs(FlexBox,{justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(FlexBox,{gap:1,children:[/*#__PURE__*/_jsx(Checkbox,{size:\"small\",name:\"remember\",onChange:handleChange,checked:values.remember,sx:{padding:0}}),/*#__PURE__*/_jsx(Paragraph,{children:\"Remember Me\"})]}),/*#__PURE__*/_jsx(NavLink,{to:\"/session/forgot-password\",style:{color:theme.palette.primary.main},children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(LoadingButton,{type:\"submit\",color:\"primary\",loading:loading,variant:\"contained\",sx:{my:2},children:\"Login\"})]});}}),/*#__PURE__*/_jsxs(FlexBox,{justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Paragraph,{children:\"This Application is powered by BinPack\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/assets/images/logo.png\",width:\"54px\",height:\"44px\",alt:\"netcare\"})]})]})})]})})});};export default JwtLogin;","map":null,"metadata":{},"sourceType":"module"}