{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"/Users/bluevisionai/Desktop/untitled folder/untitled folder/gitdagray/binpack-16-03-23/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import{Box,Card,Grid,Icon,IconButton,styled,Tooltip,Divider}from'@mui/material';import{Small,H2,H3,H6}from'app/components/Typography';import{Link}from'react-router-dom';import ProgressBar from'app/pages/ProgressBar';import axios from'app/api/axios';import{useEffect,useState}from'react';import useAuth from'app/hooks/useAuth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledCard=styled(Card)(function(_ref){var theme=_ref.theme;return _defineProperty({display:'flex',flexWrap:'wrap',alignItems:'center',justifyContent:'space-between',padding:'24px !important',background:theme.palette.background.paper},theme.breakpoints.down('sm'),{padding:'16px !important'});});var ContentBox=styled(Box)(function(_ref3){var theme=_ref3.theme;return{display:'flex',flexWrap:'wrap',alignItems:'center','& small':{color:theme.palette.text.secondary},'& .icon':{opacity:0.6,fontSize:'44px',color:theme.palette.primary.main}};});var Heading=styled('h6')(function(_ref4){var theme=_ref4.theme;return{margin:0,marginTop:'4px',fontSize:'14px',fontWeight:'500',color:theme.palette.primary.main};});var Title=styled('span')(function(){return{fontSize:'1rem',fontWeight:'500',marginRight:'.5rem',textTransform:'capitalize'};});var RejectedRequisitionsCards=function RejectedRequisitionsCards(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),requisitions=_useState2[0],setRequisitions=_useState2[1];var _useAuth=useAuth(),user=_useAuth.user;var requisitionlist=[];var fetchRequisitionData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,url,response,_response$data,status,_requisitions;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;accessToken=window.localStorage.getItem('accessToken');console.log('user.email: '+user.id);url='/requisition/hospital?driver_id='+user.id;_context.next=6;return axios.get(url,{headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}});case 6:response=_context.sent;_response$data=response.data,status=_response$data.status,_requisitions=_response$data.requisitions;console.log('requisitions: '+_requisitions);if(status===\"success\"){_requisitions.forEach(function(requisition){console.log('user.role: '+requisition.status);if(requisition.status==='Waste Disposed'){console.log('user: '+requisition.name);requisitionlist.push({requisition:requisition});}});setRequisitions(requisitionlist);}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log('error: '+_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function fetchRequisitionData(){return _ref5.apply(this,arguments);};}();useEffect(function(){fetchRequisitionData();},[]);var renderAuthIcon=function renderAuthIcon(created_date){var check=true;var days=Math.round((Date.parse(new Date())-Date.parse(created_date))/(1000*60*60*24));if(days>7){check=true;}else{check=false;}if(check){return/*#__PURE__*/_jsx(Icon,{className:\"icon\",style:{color:'#FF3D57'},children:\"new_releases\"});}else{return/*#__PURE__*/_jsx(Icon,{className:\"icon\",style:{color:'#08ad6c'},children:\"offline_pin\"});}};return/*#__PURE__*/_jsx(Grid,{container:true,sx:{mb:'24px',mt:2},sm:12,style:{gap:15},children:requisitions.map(function(requisition,index){return/*#__PURE__*/_jsx(Grid,{requisition:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Link,{state:{requisition:requisition},to:{pathname:'/netcare/service_provider/view-completed-requisitions-details',state:requisition},children:/*#__PURE__*/_jsxs(StyledCard,{elevation:6,children:[/*#__PURE__*/_jsxs(ContentBox,{children:[/*#__PURE__*/_jsx(Grid,{item:true,lg:9,md:8,sm:12,xs:12,sx:{mt:2},children:/*#__PURE__*/_jsx(Title,{children:requisition.requision_id})}),/*#__PURE__*/_jsx(Grid,{item:true,md:2,sm:12,xs:12,sx:{mt:2},children:renderAuthIcon(requisition.created_date)}),/*#__PURE__*/_jsx(Divider,{sx:{my:3}}),/*#__PURE__*/_jsxs(Box,{ml:\"-5px\",children:[/*#__PURE__*/_jsxs(H6,{children:[\"To: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.serviceProviderName})]}),/*#__PURE__*/_jsxs(H6,{children:[\"WasteType: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.wasteType})]}),/*#__PURE__*/_jsxs(H6,{children:[\"Requestor: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.hospitalName})]}),/*#__PURE__*/_jsxs(H6,{children:[\"Colletion Date: \",/*#__PURE__*/_jsx(\"small\",{children:requisition.collection_Date})]}),/*#__PURE__*/_jsxs(Heading,{children:[\"Status: \",requisition.status]})]})]}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",alignItems:\"center\",width:'100%',flexDirection:\"column\",marginTop:-3,marginBottom:-7},children:/*#__PURE__*/_jsx(ProgressBar,{bgcolor:\"orange\",progress:requisition.percentage.toString(),height:20})})]})})},index);})});};export default RejectedRequisitionsCards;","map":null,"metadata":{},"sourceType":"module"}