{"code":"(this[\"webpackJsonpmatx-react\"]=this[\"webpackJsonpmatx-react\"]||[]).push([[87],{757:function(e,t,a){\"use strict\";a.r(t);var n=a(7),s=a(5),r=a(1),o=a(67),c=a(11),i=a(33),l=a(47),u=a(13),j=a(710),d=a(300),b=a(251),m=a(247),p=a(674),h=a(501),O=a(700),x=a(245),g=a(174),f=a(41),v=a(332),w=a(66),C=a(21),S=a(289),q=a(120),y=a(2),k=Object(s.a)(j.a)((function(){return{}})),A=Object(s.a)(v.TextValidator)((function(){return{width:\"100%\",marginBottom:\"16px\"}})),N=window.localStorage.getItem(\"accessToken\"),P=function(){var e=Object(r.useState)({date:new Date}),t=Object(u.a)(e,2),a=t[0],s=t[1],o=Object(r.useState)(!1),j=Object(u.a)(o,2),P=j[0],_=j[1],E=Object(r.useState)([]),T=Object(u.a)(E,2),I=T[0],L=T[1],M=Object(r.useState)(null),H=Object(u.a)(M,2),V=H[0],z=H[1],D=P&&0===I.length,F=Object(C.f)();Object(r.useEffect)((function(){var e=!0;if(D)return Object(l.a)(Object(i.a)().mark((function t(){var a,n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get(\"/hospital\");case 2:a=t.sent,n=a.data.hospitals,console.log(n),e&&(console.log(n),L(n));case 6:case\"end\":return t.stop()}}),t)})))(),function(){e=!1}}),[D,I]),Object(r.useEffect)((function(){P||L([])}),[P]);var R=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.role.value),console.log(V.name),console.log(V.hospital_id),console.log(t.target.userstatus.value),e.prev=4,console.log(\"accessToken: \"+N),e.next=8,w.a.post(\"/users\",{name:t.target.username.value,surname:t.target.surname.value,role:t.target.role.value,password:t.target.password.value,company:V.name,company_id:V.hospital_id,is_active:t.target.userstatus.value,phone:t.target.mobile.value,email:t.target.email.value,created_date:new Date,updated_at:new Date,headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(N)}});case 8:a=e.sent,\"success\"===a.data.status&&F(\"/service_provider/user\"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(\"error: \"+e.t0);case 16:case\"end\":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){e.persist(),s(Object(c.a)(Object(c.a)({},a),{},Object(n.a)({},e.target.name,e.target.value)))},J=a.username,U=a.mobile,W=a.surname,G=a.password,K=a.confirmPassword,Q=a.email,X=a.role,Y=a.isActive;return Object(y.jsx)(\"div\",{children:Object(y.jsxs)(v.ValidatorForm,{onSubmit:R,onError:function(){return null},children:[Object(y.jsxs)(d.a,{container:!0,spacing:6,children:[Object(y.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(y.jsx)(A,{type:\"text\",name:\"username\",label:\"Name\",onChange:B,value:J||\"\",validators:[\"required\",\"minStringLength:1\",\"maxStringLength: 100\"],errorMessages:[\"this field is required\",\"this field requires 100 characters\",\"this field requires 100 characters\"]}),Object(y.jsx)(A,{type:\"email\",name:\"email\",label:\"Email\",value:Q||\"\",onChange:B,validators:[\"required\",\"isEmail\"],errorMessages:[\"this field is required\",\"email is not valid\"]}),Object(y.jsx)(A,{name:\"password\",type:\"password\",label:\"Password\",value:G||\"\",onChange:B}),Object(y.jsx)(k,{open:P,options:I,loading:D,onChange:function(e,t){console.log(\"newValue\"),console.log(t),z(t)},id:\"Hospital\",onOpen:function(){return _(!0)},onClose:function(){return _(!1)},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.name===t.name},renderInput:function(e){return Object(y.jsx)(A,Object(c.a)(Object(c.a)({},e),{},{fullWidth:!0,variant:\"outlined\",label:\"Choose Hospital\",InputProps:Object(c.a)(Object(c.a)({},e.InputProps),{},{endAdornment:Object(y.jsxs)(r.Fragment,{children:[D?Object(y.jsx)(b.a,{color:\"inherit\",size:20}):null,e.InputProps.endAdornment]})})}))}}),Object(y.jsx)(q.a,{children:Object(y.jsxs)(m.a,{component:\"fieldset\",className:\"formControl\",children:[Object(y.jsx)(S.a,{component:\"legend\",children:\"Would you like this user to be active\"}),Object(y.jsxs)(p.a,{value:Y,name:\"userstatus\",className:\"userstatus\",\"aria-label\":\"User Status\",onChange:B,children:[Object(y.jsx)(h.a,{value:!0,control:Object(y.jsx)(O.a,{}),label:\"Active\"}),Object(y.jsx)(h.a,{value:!1,control:Object(y.jsx)(O.a,{}),label:\"None Active\"})]})]})})]}),Object(y.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(y.jsx)(A,{type:\"text\",name:\"surname\",label:\"Surname\",onChange:B,value:W||\"\",validators:[\"required\",\"minStringLength:1\",\"maxStringLength: 100\"],errorMessages:[\"this field is required\",\"this field requires 100 characters\",\"this field requires 100 characters\"]}),Object(y.jsx)(A,{type:\"text\",name:\"mobile\",value:U||\"\",label:\"Mobile Number\",onChange:B,validators:[\"required\"],errorMessages:[\"this field is required\"]}),Object(y.jsx)(A,{type:\"password\",name:\"confirmPassword\",onChange:B,label:\"Confirm Password\",value:K||\"\"}),Object(y.jsx)(q.a,{children:Object(y.jsxs)(m.a,{component:\"fieldset\",className:\"formControl\",children:[Object(y.jsx)(S.a,{component:\"legend\",children:\"Role\"}),Object(y.jsxs)(p.a,{value:X,name:\"role\",className:\"Role\",\"aria-label\":\"Role\",onChange:B,children:[Object(y.jsx)(h.a,{value:\"hospitals admin\",control:Object(y.jsx)(O.a,{}),label:\"Hospital Admin\"}),Object(y.jsx)(h.a,{value:\"hospitals staff\",control:Object(y.jsx)(O.a,{}),label:\"Hospital Staff\"})]})]})})]})]}),Object(y.jsxs)(x.a,{color:\"primary\",variant:\"contained\",type:\"submit\",children:[Object(y.jsx)(g.a,{children:\"send\"}),Object(y.jsx)(f.i,{sx:{pl:1,textTransform:\"capitalize\"},children:\"Submit\"})]})]})})},_=Object(s.a)(\"div\")((function(e){var t=e.theme;return Object(n.a)({margin:\"30px\"},t.breakpoints.down(\"sm\"),{margin:\"16px\"})}));t.default=function(){return Object(y.jsx)(r.Fragment,{children:Object(y.jsx)(_,{className:\"hospitals-add-user-form\",children:Object(y.jsx)(o.l,{title:\"Add User\",children:Object(y.jsx)(P,{})})})})}}}]);","name":"static/js/87.f795b278.chunk.js","input":"(this[\"webpackJsonpmatx-react\"] = this[\"webpackJsonpmatx-react\"] || []).push([[87],{\n\n/***/ 757:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/styles/styled.js\nvar styled = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./src/app/components/index.js + 18 modules\nvar components = __webpack_require__(67);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\nvar regeneratorRuntime = __webpack_require__(33);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(47);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules\nvar slicedToArray = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Autocomplete/Autocomplete.js + 3 modules\nvar Autocomplete = __webpack_require__(710);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Grid/Grid.js + 2 modules\nvar Grid = __webpack_require__(300);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules\nvar CircularProgress = __webpack_require__(251);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormControl/FormControl.js + 1 modules\nvar FormControl = __webpack_require__(247);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/RadioGroup/RadioGroup.js\nvar RadioGroup = __webpack_require__(674);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormControlLabel/FormControlLabel.js + 1 modules\nvar FormControlLabel = __webpack_require__(501);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Radio/Radio.js + 5 modules\nvar Radio = __webpack_require__(700);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Button/Button.js + 2 modules\nvar Button = __webpack_require__(245);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Icon/Icon.js + 1 modules\nvar Icon = __webpack_require__(174);\n\n// EXTERNAL MODULE: ./src/app/components/Typography.js\nvar Typography = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/react-material-ui-form-validator/lib/index.js\nvar lib = __webpack_require__(332);\n\n// EXTERNAL MODULE: ./src/app/api/axios.js\nvar axios = __webpack_require__(66);\n\n// EXTERNAL MODULE: ./node_modules/react-router/index.js\nvar react_router = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormLabel/FormLabel.js\nvar FormLabel = __webpack_require__(289);\n\n// EXTERNAL MODULE: ./src/app/components/SimpleCard.jsx\nvar SimpleCard = __webpack_require__(120);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/app/pages/service_provider/UserViews/components/AddUserForm.jsx\nvar AutoComplete=Object(styled[\"a\" /* default */])(Autocomplete[\"a\" /* default */])(function(){return{};});var TextField=Object(styled[\"a\" /* default */])(lib[\"TextValidator\"])(function(){return{width:'100%',marginBottom:'16px'};});// type DropdownType = {\n// \tid: number,\n// \tlabel: string,\n// \thospital_id: string\n// }\nvar accessToken=window.localStorage.getItem('accessToken');var AddUserForm_AddUserForm=function AddUserForm(){var _useState=Object(react[\"useState\"])({date:new Date()}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=Object(react[\"useState\"])([]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),hospitalOptions=_useState6[0],setHospitalOptions=_useState6[1];var _useState7=Object(react[\"useState\"])(null),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),dropdownValue=_useState8[0],setDropdownValue=_useState8[1];var loading=open&&hospitalOptions.length===0;var navigate=Object(react_router[\"f\" /* useNavigate */])();Object(react[\"useEffect\"])(function(){var active=true;if(!loading){return undefined;}Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){var response,hospitals;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios[\"a\" /* default */].get('/hospital');case 2:response=_context.sent;hospitals=response.data.hospitals;console.log(hospitals);if(active){console.log(hospitals);setHospitalOptions(hospitals);}case 6:case\"end\":return _context.stop();}}},_callee);}))();return function(){active=false;};},[loading,hospitalOptions]);Object(react[\"useEffect\"])(function(){if(!open){setHospitalOptions([]);}},[open]);var handleSubmit=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(event){var response,status;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(event.target.role.value);console.log(dropdownValue.name);console.log(dropdownValue.hospital_id);console.log(event.target.userstatus.value);_context2.prev=4;console.log('accessToken: '+accessToken);_context2.next=8;return axios[\"a\" /* default */].post('/users',{name:event.target.username.value,surname:event.target.surname.value,role:event.target.role.value,password:event.target.password.value,company:dropdownValue.name,company_id:dropdownValue.hospital_id,is_active:event.target.userstatus.value,phone:event.target.mobile.value,email:event.target.email.value,created_date:new Date(),updated_at:new Date(),headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}// withCredentials: true\n});case 8:response=_context2.sent;status=response.data.status;if(status==='success'){// setOpen(true);\nnavigate('/service_provider/user');}_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](4);console.log('error: '+_context2.t0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[4,13]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleDropdownChange=function handleDropdownChange(_,newValue){console.log('newValue');console.log(newValue);// if (newValue && newValue.inputValue) {\n// \tsetDropdownValue({ label: newValue.inputValue });\n//   return;\n// }\nsetDropdownValue(newValue);};// function handleRoleChange(event) {\n// \tsetRole(event.target.value);\n// }\n// function handleIsActiveChange(event) {\n// \tsetIsActive(event.target.value);\n// }\nvar handleChange=function handleChange(event){event.persist();setFormState(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},formState),{},Object(defineProperty[\"a\" /* default */])({},event.target.name,event.target.value)));};var username=formState.username,mobile=formState.mobile,surname=formState.surname,password=formState.password,confirmPassword=formState.confirmPassword,email=formState.email,role=formState.role,isActive=formState.isActive;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(lib[\"ValidatorForm\"],{onSubmit:handleSubmit,onError:function onError(){return null;},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,spacing:6,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"text\",name:\"username\",label:\"Name\",onChange:handleChange,value:username||'',validators:['required','minStringLength:1','maxStringLength: 100'],errorMessages:['this field is required','this field requires 100 characters','this field requires 100 characters']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"email\",name:\"email\",label:\"Email\",value:email||'',onChange:handleChange,validators:['required','isEmail'],errorMessages:['this field is required','email is not valid']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{name:\"password\",type:\"password\",label:\"Password\",value:password||'',onChange:handleChange// validators={[\"required\"]}\n// errorMessages={[\"this field is required\"]}\n}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoComplete,{open:open,options:hospitalOptions,loading:loading,onChange:handleDropdownChange,id:\"Hospital\",onOpen:function onOpen(){return setOpen(true);},onClose:function onClose(){return setOpen(false);},getOptionLabel:function getOptionLabel(option){return option.name;},isOptionEqualToValue:function isOptionEqualToValue(option,value){return option.name===value.name;},renderInput:function renderInput(params){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},params),{},{fullWidth:true,variant:\"outlined\",label:\"Choose Hospital\",InputProps:Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},params.InputProps),{},{endAdornment:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Fragment\"],{children:[loading?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CircularProgress[\"a\" /* default */],{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SimpleCard[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormControl[\"a\" /* default */],{component:\"fieldset\",className:\"formControl\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormLabel[\"a\" /* default */],{component:\"legend\",children:\"Would you like this user to be active\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(RadioGroup[\"a\" /* default */],{value:isActive,name:\"userstatus\",className:\"userstatus\",\"aria-label\":\"User Status\",onChange:handleChange,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:true,control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"Active\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:false,control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"None Active\"})]})]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"text\",name:\"surname\",label:\"Surname\",onChange:handleChange,value:surname||'',validators:['required','minStringLength:1','maxStringLength: 100'],errorMessages:['this field is required','this field requires 100 characters','this field requires 100 characters']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"text\",name:\"mobile\",value:mobile||'',label:\"Mobile Number\",onChange:handleChange,validators:['required'],errorMessages:['this field is required']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"password\",name:\"confirmPassword\",onChange:handleChange,label:\"Confirm Password\",value:confirmPassword||''// validators={[\"required\", \"isPasswordMatch\"]}\n// errorMessages={[\"this field is required\", \"password didn't match\"]}\n}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SimpleCard[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormControl[\"a\" /* default */],{component:\"fieldset\",className:\"formControl\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormLabel[\"a\" /* default */],{component:\"legend\",children:\"Role\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(RadioGroup[\"a\" /* default */],{value:role,name:\"role\",className:\"Role\",\"aria-label\":\"Role\",onChange:handleChange,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:\"hospitals admin\",control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"Hospital Admin\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:\"hospitals staff\",control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"Hospital Staff\"})]})]})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */],{color:\"primary\",variant:\"contained\",type:\"submit\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Icon[\"a\" /* default */],{children:\"send\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"i\" /* Span */],{sx:{pl:1,textTransform:'capitalize'},children:\"Submit\"})]})]})});};/* harmony default export */ var components_AddUserForm = (AddUserForm_AddUserForm);\n// CONCATENATED MODULE: ./src/app/pages/service_provider/UserViews/UsersAddForm.jsx\nvar ContentBox=Object(styled[\"a\" /* default */])('div')(function(_ref){var theme=_ref.theme;return Object(defineProperty[\"a\" /* default */])({margin:'30px'},theme.breakpoints.down('sm'),{margin:'16px'});});var UsersAddForm_HospitalsAddForm=function HospitalsAddForm(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContentBox,{className:\"hospitals-add-user-form\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components[\"l\" /* SimpleCard */],{title:\"Add User\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_AddUserForm,{})})})});};/* harmony default export */ var UsersAddForm = __webpack_exports__[\"default\"] = (UsersAddForm_HospitalsAddForm);\n\n/***/ })\n\n}]);","inputSourceMap":null}