{"code":"(this[\"webpackJsonpmatx-react\"]=this[\"webpackJsonpmatx-react\"]||[]).push([[74],{750:function(e,t,a){\"use strict\";a.r(t);var s=a(7),n=a(5),r=a(1),i=a(67),c=a(11),o=a(33),l=a(47),u=a(13),j=a(710),d=a(300),b=a(251),m=a(247),h=a(674),p=a(501),O=a(700),x=a(245),g=a(174),v=a(41),f=a(332),y=a(66),S=a(289),q=a(120),w=a(21),C=a(2),_=Object(n.a)(j.a)((function(){return{}})),k=Object(n.a)(f.TextValidator)((function(){return{width:\"100%\",marginBottom:\"16px\"}})),N=function(){var e=Object(w.e)(),t=Object(r.useState)({date:new Date}),a=Object(u.a)(t,2),n=a[0],i=a[1],j=Object(r.useState)(!1),N=Object(u.a)(j,2),A=N[0],E=N[1],I=Object(r.useState)([e.state.user.company]),L=Object(u.a)(I,2),M=L[0],T=L[1],V=Object(r.useState)(),z=Object(u.a)(V,2),D=z[0],F=z[1],H=A&&0===M.length,P=Object(w.f)();Object(r.useEffect)((function(){var e=!0;if(H)return Object(l.a)(Object(o.a)().mark((function t(){var a,s;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get(\"/hospital\");case 2:a=t.sent,s=a.data.hospitals,console.log(s),e&&(console.log(s),T(s));case 6:case\"end\":return t.stop()}}),t)})))(),function(){e=!1}}),[H,M]),Object(r.useEffect)((function(){A||T([])}),[A]);var R=function(){var t=Object(l.a)(Object(o.a)().mark((function t(a){var s,n,r,i,c,l;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.state.user.is_active,a.target.userstatus.value&&(s=a.target.userstatus.value),n=\"\",r=\"\",void 0===D?(n=e.state.user.company_id,r=e.state.user.company):(n=D.hospital_id,r=D.name),t.prev=5,i=window.localStorage.getItem(\"accessToken\"),console.log(\"location.state.user._id: \"+e.state.user._id),c=\"/users/\"+e.state.user._id,console.log(\"url: \"+c),t.next=12,y.a.patch(c,{name:a.target.username.value,surname:a.target.surname.value,role:a.target.role.value,company:r,company_id:n,is_active:s,phone:a.target.mobile.value,email:a.target.email.value,updated_at:new Date,headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(i)}});case 12:l=t.sent,\"success\"===l.data.status&&P(\"/netcare/hospital/user\"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),console.log(\"error: \"+t.t0);case 20:case\"end\":return t.stop()}}),t,null,[[5,17]])})));return function(e){return t.apply(this,arguments)}}(),B=function(e){e.persist(),i(Object(c.a)(Object(c.a)({},n),{},Object(s.a)({},e.target.name,e.target.value)))},J=n.username,U=void 0===J?e.state.user.name:J,W=n.mobile,G=void 0===W?e.state.user.phone:W,K=n.surname,Q=void 0===K?e.state.user.surname:K,X=n.email,Y=void 0===X?e.state.user.email:X,Z=n.role,$=void 0===Z?e.state.user.role:Z,ee=n.isActive;return Object(C.jsx)(\"div\",{children:Object(C.jsxs)(f.ValidatorForm,{onSubmit:R,onError:function(){return null},children:[Object(C.jsxs)(d.a,{container:!0,spacing:6,children:[Object(C.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(C.jsx)(k,{type:\"text\",name:\"username\",label:\"Name\",onChange:B,value:U||\"\",validators:[\"required\",\"minStringLength:1\",\"maxStringLength: 100\"],errorMessages:[\"this field is required\",\"this field requires 100 characters\",\"this field requires 100 characters\"]}),Object(C.jsx)(k,{type:\"email\",name:\"email\",label:\"Email\",value:Y||\"\",onChange:B,validators:[\"required\",\"isEmail\"],errorMessages:[\"this field is required\",\"email is not valid\"]}),Object(C.jsx)(_,{open:A,options:M,loading:H,onChange:function(e,t){console.log(\"newValue\"),console.log(t),F(t)},id:\"Hospital\",onOpen:function(){return E(!0)},onClose:function(){return E(!1)},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.name===t.name},renderInput:function(t){return Object(C.jsx)(k,Object(c.a)(Object(c.a)({},t),{},{fullWidth:!0,variant:\"outlined\",label:e.state.user.company,InputProps:Object(c.a)(Object(c.a)({},t.InputProps),{},{endAdornment:Object(C.jsxs)(r.Fragment,{children:[H?Object(C.jsx)(b.a,{color:\"inherit\",size:20}):null,t.InputProps.endAdornment]})})}))}}),Object(C.jsx)(q.a,{children:Object(C.jsxs)(m.a,{component:\"fieldset\",className:\"formControl\",children:[Object(C.jsxs)(S.a,{component:\"legend\",children:[\"Would you like this user to be active: \",e.state.user.is_active.toString()]}),Object(C.jsxs)(h.a,{value:ee,name:\"userstatus\",className:\"userstatus\",\"aria-label\":\"User Status\",onChange:B,children:[Object(C.jsx)(p.a,{value:!0,control:Object(C.jsx)(O.a,{}),label:\"Active\"}),Object(C.jsx)(p.a,{value:!1,control:Object(C.jsx)(O.a,{}),label:\"None Active\"})]})]})})]}),Object(C.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(C.jsx)(k,{type:\"text\",name:\"surname\",label:\"Surname\",onChange:B,value:Q||\"\",validators:[\"required\",\"minStringLength:1\",\"maxStringLength: 100\"],errorMessages:[\"this field is required\",\"this field requires 100 characters\",\"this field requires 100 characters\"]}),Object(C.jsx)(k,{type:\"text\",name:\"mobile\",value:G||\"\",label:\"Mobile Number\",onChange:B,validators:[\"required\"],errorMessages:[\"this field is required\"]}),Object(C.jsx)(q.a,{children:Object(C.jsxs)(m.a,{component:\"fieldset\",className:\"formControl\",children:[Object(C.jsx)(S.a,{component:\"legend\",children:\"Role\"}),Object(C.jsxs)(h.a,{value:$,name:\"role\",className:\"Role\",\"aria-label\":\"Role\",onChange:B,children:[Object(C.jsx)(p.a,{value:\"hospitals admin\",control:Object(C.jsx)(O.a,{}),label:\"Hospital Admin\"}),Object(C.jsx)(p.a,{value:\"hospitals staff\",control:Object(C.jsx)(O.a,{}),label:\"Hospital Staff\"})]})]})})]})]}),Object(C.jsxs)(x.a,{color:\"primary\",variant:\"contained\",type:\"submit\",children:[Object(C.jsx)(g.a,{children:\"send\"}),Object(C.jsx)(v.i,{sx:{pl:1,textTransform:\"capitalize\"},children:\"Submit\"})]})]})})},A=Object(n.a)(\"div\")((function(e){var t=e.theme;return Object(s.a)({margin:\"30px\"},t.breakpoints.down(\"sm\"),{margin:\"16px\"})}));t.default=function(){return Object(C.jsx)(r.Fragment,{children:Object(C.jsx)(A,{className:\"hospital-edit-user-form\",children:Object(C.jsx)(i.l,{title:\"Edit User Details\",children:Object(C.jsx)(N,{})})})})}}}]);","name":"static/js/74.d2f594ac.chunk.js","input":"(this[\"webpackJsonpmatx-react\"] = this[\"webpackJsonpmatx-react\"] || []).push([[74],{\n\n/***/ 750:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/styles/styled.js\nvar styled = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./src/app/components/index.js + 18 modules\nvar components = __webpack_require__(67);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\nvar regeneratorRuntime = __webpack_require__(33);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(47);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules\nvar slicedToArray = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Autocomplete/Autocomplete.js + 3 modules\nvar Autocomplete = __webpack_require__(710);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Grid/Grid.js + 2 modules\nvar Grid = __webpack_require__(300);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules\nvar CircularProgress = __webpack_require__(251);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormControl/FormControl.js + 1 modules\nvar FormControl = __webpack_require__(247);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/RadioGroup/RadioGroup.js\nvar RadioGroup = __webpack_require__(674);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormControlLabel/FormControlLabel.js + 1 modules\nvar FormControlLabel = __webpack_require__(501);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Radio/Radio.js + 5 modules\nvar Radio = __webpack_require__(700);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Button/Button.js + 2 modules\nvar Button = __webpack_require__(245);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Icon/Icon.js + 1 modules\nvar Icon = __webpack_require__(174);\n\n// EXTERNAL MODULE: ./src/app/components/Typography.js\nvar Typography = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/react-material-ui-form-validator/lib/index.js\nvar lib = __webpack_require__(332);\n\n// EXTERNAL MODULE: ./src/app/api/axios.js\nvar axios = __webpack_require__(66);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/FormLabel/FormLabel.js\nvar FormLabel = __webpack_require__(289);\n\n// EXTERNAL MODULE: ./src/app/components/SimpleCard.jsx\nvar SimpleCard = __webpack_require__(120);\n\n// EXTERNAL MODULE: ./node_modules/react-router/index.js\nvar react_router = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/app/pages/hospital/UserViews/components/EditUserForm.jsx\nvar AutoComplete=Object(styled[\"a\" /* default */])(Autocomplete[\"a\" /* default */])(function(){return{};});var TextField=Object(styled[\"a\" /* default */])(lib[\"TextValidator\"])(function(){return{width:'100%',marginBottom:'16px'};});var EditUserForm_EditUserForm=function EditUserForm(){var location=Object(react_router[\"e\" /* useLocation */])();var _useState=Object(react[\"useState\"])({date:new Date()}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=Object(react[\"useState\"])([location.state.user.company]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),hospitalOptions=_useState6[0],setHospitalOptions=_useState6[1];var _useState7=Object(react[\"useState\"])(),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),dropdownValue=_useState8[0],setDropdownValue=_useState8[1];var loading=open&&hospitalOptions.length===0;var navigate=Object(react_router[\"f\" /* useNavigate */])();Object(react[\"useEffect\"])(function(){var active=true;if(!loading){return undefined;}Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){var response,hospitals;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios[\"a\" /* default */].get('/hospital');case 2:response=_context.sent;hospitals=response.data.hospitals;console.log(hospitals);if(active){console.log(hospitals);setHospitalOptions(hospitals);}case 6:case\"end\":return _context.stop();}}},_callee);}))();return function(){active=false;};},[loading,hospitalOptions]);Object(react[\"useEffect\"])(function(){if(!open){setHospitalOptions([]);}},[open]);var handleSubmit=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(event){var isactive,hospital_id,hospital_name,accessToken,url,response,status;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isactive=location.state.user.is_active;if(event.target.userstatus.value){isactive=event.target.userstatus.value;}hospital_id='';hospital_name='';if(dropdownValue===undefined){hospital_id=location.state.user.company_id;hospital_name=location.state.user.company;}else{hospital_id=dropdownValue.hospital_id;hospital_name=dropdownValue.name;}_context2.prev=5;accessToken=window.localStorage.getItem('accessToken');console.log('location.state.user._id: '+location.state.user._id);url='/users/'+location.state.user._id;console.log('url: '+url);_context2.next=12;return axios[\"a\" /* default */].patch(url,{name:event.target.username.value,surname:event.target.surname.value,role:event.target.role.value,company:hospital_name,company_id:hospital_id,is_active:isactive,phone:event.target.mobile.value,email:event.target.email.value,updated_at:new Date(),headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(accessToken)}// withCredentials: true\n});case 12:response=_context2.sent;status=response.data.status;if(status==='success'){navigate('/netcare/hospital/user');}_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](5);console.log('error: '+_context2.t0);case 20:case\"end\":return _context2.stop();}}},_callee2,null,[[5,17]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleDropdownChange=function handleDropdownChange(_,newValue){console.log('newValue');console.log(newValue);setDropdownValue(newValue);};var handleChange=function handleChange(event){event.persist();setFormState(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},formState),{},Object(defineProperty[\"a\" /* default */])({},event.target.name,event.target.value)));};var _formState$username=formState.username,username=_formState$username===void 0?location.state.user.name:_formState$username,_formState$mobile=formState.mobile,mobile=_formState$mobile===void 0?location.state.user.phone:_formState$mobile,_formState$surname=formState.surname,surname=_formState$surname===void 0?location.state.user.surname:_formState$surname,_formState$email=formState.email,email=_formState$email===void 0?location.state.user.email:_formState$email,_formState$role=formState.role,role=_formState$role===void 0?location.state.user.role:_formState$role,isActive=formState.isActive;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(lib[\"ValidatorForm\"],{onSubmit:handleSubmit,onError:function onError(){return null;},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,spacing:6,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"text\",name:\"username\",label:\"Name\",onChange:handleChange,value:username||'',validators:['required','minStringLength:1','maxStringLength: 100'],errorMessages:['this field is required','this field requires 100 characters','this field requires 100 characters']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"email\",name:\"email\",label:\"Email\",value:email||'',onChange:handleChange,validators:['required','isEmail'],errorMessages:['this field is required','email is not valid']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoComplete,{open:open,options:hospitalOptions,loading:loading,onChange:handleDropdownChange,id:\"Hospital\",onOpen:function onOpen(){return setOpen(true);},onClose:function onClose(){return setOpen(false);},getOptionLabel:function getOptionLabel(option){return option.name;},isOptionEqualToValue:function isOptionEqualToValue(option,value){return option.name===value.name;},renderInput:function renderInput(params){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},params),{},{fullWidth:true,variant:\"outlined\",label:location.state.user.company,InputProps:Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},params.InputProps),{},{endAdornment:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Fragment\"],{children:[loading?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CircularProgress[\"a\" /* default */],{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SimpleCard[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormControl[\"a\" /* default */],{component:\"fieldset\",className:\"formControl\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormLabel[\"a\" /* default */],{component:\"legend\",children:[\"Would you like this user to be active: \",location.state.user.is_active.toString()]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(RadioGroup[\"a\" /* default */],{value:isActive,name:\"userstatus\",className:\"userstatus\",\"aria-label\":\"User Status\",onChange:handleChange,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:true,control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"Active\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:false,control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"None Active\"})]})]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"text\",name:\"surname\",label:\"Surname\",onChange:handleChange,value:surname||'',validators:['required','minStringLength:1','maxStringLength: 100'],errorMessages:['this field is required','this field requires 100 characters','this field requires 100 characters']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField,{type:\"text\",name:\"mobile\",value:mobile||'',label:\"Mobile Number\",onChange:handleChange,validators:['required'],errorMessages:['this field is required']}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SimpleCard[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormControl[\"a\" /* default */],{component:\"fieldset\",className:\"formControl\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormLabel[\"a\" /* default */],{component:\"legend\",children:\"Role\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(RadioGroup[\"a\" /* default */],{value:role,name:\"role\",className:\"Role\",\"aria-label\":\"Role\",onChange:handleChange,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:\"hospitals admin\",control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"Hospital Admin\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormControlLabel[\"a\" /* default */],{value:\"hospitals staff\",control:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Radio[\"a\" /* default */],{}),label:\"Hospital Staff\"})]})]})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */],{color:\"primary\",variant:\"contained\",type:\"submit\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Icon[\"a\" /* default */],{children:\"send\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"i\" /* Span */],{sx:{pl:1,textTransform:'capitalize'},children:\"Submit\"})]})]})});};/* harmony default export */ var components_EditUserForm = (EditUserForm_EditUserForm);\n// CONCATENATED MODULE: ./src/app/pages/hospital/UserViews/UsersEditForm.jsx\nvar ContentBox=Object(styled[\"a\" /* default */])('div')(function(_ref){var theme=_ref.theme;return Object(defineProperty[\"a\" /* default */])({margin:'30px'},theme.breakpoints.down('sm'),{margin:'16px'});});var UsersEditForm_HospitalsEditForm=function HospitalsEditForm(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContentBox,{className:\"hospital-edit-user-form\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components[\"l\" /* SimpleCard */],{title:\"Edit User Details\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_EditUserForm,{})})})});};/* harmony default export */ var UsersEditForm = __webpack_exports__[\"default\"] = (UsersEditForm_HospitalsEditForm);\n\n/***/ })\n\n}]);","inputSourceMap":null}