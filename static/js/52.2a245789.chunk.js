(this.webpackJsonpBinPack=this.webpackJsonpBinPack||[]).push([[52],{352:function(e,t,a){"use strict";a(1);var c=a(2);t.a=e=>{let{bgcolor:t,progress:a,height:i}=e;const n={height:i,width:"100%",backgroundColor:"whitesmoke",borderRadius:40,margin:50},s={height:"100%",width:"".concat(a,"%"),backgroundColor:t,textAlign:"left",alignItems:"center"};return Object(c.jsx)("div",{style:n,children:Object(c.jsx)("div",{style:s,children:Object(c.jsx)("span",{style:{color:"black",fontWeight:900,textAlign:"center"},children:"".concat(a,"%")})})})}},754:function(e,t,a){"use strict";a.r(t);var c=a(5),i=a(196),n=a(265),s=a(40),o=a(1),r=a(69),l=a(273),d=a(194),j=a(331),p=a(318),g=a(36),h=a(352),x=a(139),b=a(2);const m=Object(c.a)(l.a)((e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",padding:"24px !important",background:t.palette.background.paper,[t.breakpoints.down("sm")]:{padding:"16px !important"}}})),u=Object(c.a)(i.a)((e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",alignItems:"center","& small":{color:t.palette.text.secondary},"& .icon":{opacity:.6,fontSize:"44px",color:t.palette.primary.main}}})),O=Object(c.a)("h6")((e=>{let{theme:t}=e;return{margin:0,marginTop:"4px",fontSize:"14px",fontWeight:"500",color:t.palette.primary.main}})),f=Object(c.a)("span")((()=>({fontSize:"1rem",fontWeight:"500",marginRight:".5rem",textTransform:"capitalize"})));var y=()=>{const[e,t]=Object(o.useState)([]);let{user:a}=Object(x.a)();Object(o.useEffect)((()=>{(async()=>{try{const c=window.localStorage.getItem("accessToken");var e="/requisition/hospital?driver_id="+a.id;const i=await r.a.get(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}),{status:n,requisitions:s}=i.data;"success"===n&&t(s)}catch(c){}})()}),[a.id]);return Object(b.jsx)(j.a,{container:!0,sx:{mb:"24px",mt:2},sm:12,style:{gap:15},children:e.map(((e,t)=>{return Object(b.jsx)(j.a,{requisition:!0,xs:12,md:3,children:Object(b.jsx)(g.b,{state:{requisition:e},to:{pathname:"/netcare/driver/view-requisitions-details",state:e},children:Object(b.jsxs)(m,{elevation:6,children:[Object(b.jsxs)(u,{children:[Object(b.jsx)(j.a,{item:!0,lg:9,md:8,sm:12,xs:12,sx:{mt:2},children:Object(b.jsx)(f,{children:e.requision_id})}),Object(b.jsx)(j.a,{item:!0,md:2,sm:12,xs:12,sx:{mt:2},children:(a=e.created_date,Math.round((Date.parse(new Date)-Date.parse(a))/864e5)>7?Object(b.jsx)(d.a,{className:"icon",style:{color:"#FF3D57"},children:"new_releases"}):Object(b.jsx)(d.a,{className:"icon",style:{color:"#08ad6c"},children:"offline_pin"}))}),Object(b.jsx)(p.a,{sx:{my:3}}),Object(b.jsxs)(i.a,{ml:"-5px",children:[Object(b.jsxs)(s.f,{children:["To: ",Object(b.jsx)("small",{children:e.serviceProviderName})]}),Object(b.jsxs)(s.f,{children:["WasteType: ",Object(b.jsx)("small",{children:e.wasteType})]}),Object(b.jsxs)(s.f,{children:["Requestor: ",Object(b.jsx)("small",{children:e.hospitalName})]}),Object(b.jsxs)(s.f,{children:["Colletion Date: ",Object(b.jsx)("small",{children:e.collection_Date})]}),Object(b.jsxs)(O,{children:["Status: ",e.status]})]})]}),Object(b.jsx)(i.a,{sx:{display:"flex",alignItems:"center",width:"100%",flexDirection:"column",marginTop:-3,marginBottom:-7},children:Object(b.jsx)(h.a,{bgcolor:"orange",progress:e.percentage.toString(),height:20})})]})})},t);var a}))})},v=a(133);const w=Object(c.a)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"}}})),k=Object(c.a)("span")((()=>({fontSize:"1rem",fontWeight:"500",marginRight:".5rem",textTransform:"capitalize"}))),T=Object(c.a)(i.a)((()=>({display:"flex",paddingLeft:"24px",paddingRight:"24px",marginBottom:"12px",alignItems:"center",justifyContent:"space-between"}))),A=e=>new Promise((t=>setTimeout(t,e)));t.default=()=>{const[e,t]=Object(o.useState)(!1),[a,c]=Object(o.useState)([]);Object(o.useEffect)((()=>{(async()=>{try{const e=window.localStorage.getItem("accessToken");const a=await r.a.get("/locationTracking/stream-location?user_id=63ea2973ddeb14b5c1bdb0da",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),{status:i,location:n}=a.data;console.log("status: "+i),console.log("location: "+n[0].isActive),"success"===i&&(t(n[0].isActive),c(n[0]))}catch(e){console.log("error: "+e)}})(),(async()=>{for(;e.isActive;){await A(5e3);try{navigator.geolocation.getCurrentPosition((e=>{console.log(e);const{latitude:t,longitude:a}=e.coords;console.log(t),console.log(a)}))}catch(t){console.log("error: "+t)}}})()}),[e.isActive]);const l=async e=>{var t=!1;console.log("signal: "+e),1===e&&(t=!0);try{const e=await r.a.patch("/locationTracking/"+a._id,{isActive:t,headers:{"Content-Type":"application/json"}});console.log("res: "+e)}catch(c){console.log("error: "+c)}};return Object(b.jsx)(o.Fragment,{children:Object(b.jsx)(w,{className:"active-requisitions",children:Object(b.jsxs)(v.a,{children:[Object(b.jsxs)(T,{children:[Object(b.jsx)(k,{children:"Active Requisitions"}),Object(b.jsx)(i.a,{ml:"-5px",style:{textAlign:"right"},children:(e=>(console.log("locationState: "+e),e?Object(b.jsx)(n.a,{style:{background:"#08ad6c"},variant:"contained",onClick:e=>l(2),children:Object(b.jsx)(s.i,{sx:{pl:1,textTransform:"capitalize"},children:"De-Activate Device Tracking"})}):Object(b.jsx)(n.a,{style:{background:"#FF3D57"},variant:"contained",onClick:e=>l(1),children:Object(b.jsx)(s.i,{sx:{pl:1,textTransform:"capitalize"},children:"Activate Device Tracking"})})))(e)})]}),Object(b.jsx)(y,{})]})})})}}}]);