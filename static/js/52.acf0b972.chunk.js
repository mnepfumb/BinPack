(this.webpackJsonpBinPack=this.webpackJsonpBinPack||[]).push([[52],{365:function(e,t,n){"use strict";n(1);var a=n(2);t.a=function(e){var t=e.bgcolor,n=e.progress,c={height:e.height,width:"100%",backgroundColor:"whitesmoke",borderRadius:40,margin:50},r={height:"100%",width:"".concat(n,"%"),backgroundColor:t,textAlign:"left",alignItems:"center"};return Object(a.jsx)("div",{style:c,children:Object(a.jsx)("div",{style:r,children:Object(a.jsx)("span",{style:{color:"black",fontWeight:900,textAlign:"center"},children:"".concat(n,"%")})})})}},762:function(e,t,n){"use strict";n.r(t);var a=n(33),c=n(46),r=n(13),i=n(7),s=n(5),o=n(171),l=n(245),u=n(41),d=n(1),j=n(65),p=n(252),b=n(174),x=n(300),h=n(288),g=n(37),m=n(365),f=n(129),O=n(2),v=Object(s.a)(p.a)((function(e){var t=e.theme;return Object(i.a)({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",padding:"24px !important",background:t.palette.background.paper},t.breakpoints.down("sm"),{padding:"16px !important"})})),k=Object(s.a)(o.a)((function(e){var t=e.theme;return{display:"flex",flexWrap:"wrap",alignItems:"center","& small":{color:t.palette.text.secondary},"& .icon":{opacity:.6,fontSize:"44px",color:t.palette.primary.main}}})),y=Object(s.a)("h6")((function(e){return{margin:0,marginTop:"4px",fontSize:"14px",fontWeight:"500",color:e.theme.palette.primary.main}})),w=Object(s.a)("span")((function(){return{fontSize:"1rem",fontWeight:"500",marginRight:".5rem",textTransform:"capitalize"}})),T=function(){var e=Object(d.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(f.a)().user;Object(d.useEffect)((function(){var e=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,r,o,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.localStorage.getItem("accessToken"),n="/requisition/hospital?driver_id="+s.id,e.next=5,j.a.get(n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 5:c=e.sent,r=c.data,o=r.status,l=r.requisitions,"success"===o&&i(l),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[s.id]);return Object(O.jsx)(x.a,{container:!0,sx:{mb:"24px",mt:2},sm:12,style:{gap:15},children:n.map((function(e,t){return Object(O.jsx)(x.a,{requisition:!0,xs:12,md:3,children:Object(O.jsx)(g.b,{state:{requisition:e},to:{pathname:"/netcare/driver/view-requisitions-details",state:e},children:Object(O.jsxs)(v,{elevation:6,children:[Object(O.jsxs)(k,{children:[Object(O.jsx)(x.a,{item:!0,lg:9,md:8,sm:12,xs:12,sx:{mt:2},children:Object(O.jsx)(w,{children:e.requision_id})}),Object(O.jsx)(x.a,{item:!0,md:2,sm:12,xs:12,sx:{mt:2},children:(n=e.created_date,Math.round((Date.parse(new Date)-Date.parse(n))/864e5)>7?Object(O.jsx)(b.a,{className:"icon",style:{color:"#FF3D57"},children:"new_releases"}):Object(O.jsx)(b.a,{className:"icon",style:{color:"#08ad6c"},children:"offline_pin"}))}),Object(O.jsx)(h.a,{sx:{my:3}}),Object(O.jsxs)(o.a,{ml:"-5px",children:[Object(O.jsxs)(u.f,{children:["To: ",Object(O.jsx)("small",{children:e.serviceProviderName})]}),Object(O.jsxs)(u.f,{children:["WasteType: ",Object(O.jsx)("small",{children:e.wasteType})]}),Object(O.jsxs)(u.f,{children:["Requestor: ",Object(O.jsx)("small",{children:e.hospitalName})]}),Object(O.jsxs)(u.f,{children:["Colletion Date: ",Object(O.jsx)("small",{children:e.collection_Date})]}),Object(O.jsxs)(y,{children:["Status: ",e.status]})]})]}),Object(O.jsx)(o.a,{sx:{display:"flex",alignItems:"center",width:"100%",flexDirection:"column",marginTop:-3,marginBottom:-7},children:Object(O.jsx)(m.a,{bgcolor:"orange",progress:e.percentage.toString(),height:20})})]})})},t);var n}))})},A=n(120),S=Object(s.a)("div")((function(e){var t=e.theme;return Object(i.a)({margin:"30px"},t.breakpoints.down("sm"),{margin:"16px"})})),C=Object(s.a)("span")((function(){return{fontSize:"1rem",fontWeight:"500",marginRight:".5rem",textTransform:"capitalize"}})),D=Object(s.a)(o.a)((function(){return{display:"flex",paddingLeft:"24px",paddingRight:"24px",marginBottom:"12px",alignItems:"center",justifyContent:"space-between"}})),z=function(e){return new Promise((function(t){return setTimeout(t,e)}))};t.default=function(){var e=Object(d.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(d.useState)([]),p=Object(r.a)(s,2),b=p[0],x=p[1];Object(d.useEffect)((function(){var e=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isActive){e.next=6;break}return e.next=3,z(5e3);case 3:try{navigator.geolocation.getCurrentPosition((function(e){console.log(e);var t=e.coords,n=t.latitude,a=t.longitude;console.log(n),console.log(a)}))}catch(t){console.log("error: "+t)}e.next=0;break;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,r,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.localStorage.getItem("accessToken"),"63ea2973ddeb14b5c1bdb0da","/locationTracking/stream-location?user_id=63ea2973ddeb14b5c1bdb0da",e.next=6,j.a.get("/locationTracking/stream-location?user_id=63ea2973ddeb14b5c1bdb0da",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 6:n=e.sent,c=n.data,r=c.status,s=c.location,console.log("status: "+r),console.log("location: "+s[0].isActive),"success"===r&&(i(s[0].isActive),x(s[0])),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error: "+e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();t(),e()}),[n.isActive]);var h=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,console.log("signal: "+t),1===t&&(n=!0),e.prev=3,e.next=6,j.a.patch("/locationTracking/"+b._id,{isActive:n,headers:{"Content-Type":"application/json"}});case 6:c=e.sent,console.log("res: "+c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("error: "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(d.Fragment,{children:Object(O.jsx)(S,{className:"active-requisitions",children:Object(O.jsxs)(A.a,{children:[Object(O.jsxs)(D,{children:[Object(O.jsx)(C,{children:"Active Requisitions"}),Object(O.jsx)(o.a,{ml:"-5px",style:{textAlign:"right"},children:function(e){return console.log("locationState: "+e),e?Object(O.jsx)(l.a,{style:{background:"#08ad6c"},variant:"contained",onClick:function(e){return h(2)},children:Object(O.jsx)(u.i,{sx:{pl:1,textTransform:"capitalize"},children:"De-Activate Device Tracking"})}):Object(O.jsx)(l.a,{style:{background:"#FF3D57"},variant:"contained",onClick:function(e){return h(1)},children:Object(O.jsx)(u.i,{sx:{pl:1,textTransform:"capitalize"},children:"Activate Device Tracking"})})}(n)})]}),Object(O.jsx)(T,{})]})})})}}}]);