(this.webpackJsonpBinPack=this.webpackJsonpBinPack||[]).push([[67],{742:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(4),s=a(1),i=a(66),c=a(10),o=a(32),l=a(45),u=a(12),j=a(709),d=a(250),b=a(299),m=a(246),p=a(671),O=a(488),h=a(698),x=a(244),v=a(173),f=a(40),g=a(332),w=a(64),C=a(20),y=a(288),S=a(119),q=a(2),P=Object(r.a)(j.a)((function(){return{}})),k=Object(r.a)(g.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),A=window.localStorage.getItem("accessToken"),I=function(){var e=Object(s.useState)({date:new Date}),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(s.useState)(!1),j=Object(u.a)(i,2),I=j[0],N=j[1],T=Object(s.useState)([]),E=Object(u.a)(T,2),L=E[0],_=E[1],M=Object(s.useState)([]),U=Object(u.a)(M,2),z=U[0],B=U[1],D=Object(s.useState)(null),F=Object(u.a)(D,2),V=F[0],H=F[1],R=Object(s.useState)(null),W=Object(u.a)(R,2),J=W[0],G=W[1],K=I&&0===L.length,Q=Object(C.f)();Object(s.useEffect)((function(){var e=!0;if(K)return Object(l.a)(Object(o.a)().mark((function t(){var a,n,r,s;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/hospital",{headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.next=5,w.a.get("/company",{headers:{"Content-Type":"application/json"}});case 5:n=t.sent,r=a.data.hospitals,s=n.data.companies,e&&(_(r),B(s));case 9:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[K,L]),Object(s.useEffect)((function(){I||_([])}),[I]);var X=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var a,n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",n="",null!==V?(a=V.name,n=V.hospital_id):null!==J&&(a=J.name,n=J.company_id),e.prev=3,e.next=6,w.a.post("/users",{name:t.target.username.value,surname:t.target.surname.value,role:t.target.role.value,password:t.target.password.value,company:a,company_id:n,is_active:t.target.userstatus.value,phone:t.target.mobile.value,email:t.target.email.value,created_date:new Date,updated_at:new Date,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(A)}});case 6:r=e.sent,"success"===r.data.status&&Q("/netcare/admin/user"),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){H(t)},Z=function(e,t){G(t)},$=function(e){e.persist(),r(Object(c.a)(Object(c.a)({},a),{},Object(n.a)({},e.target.name,e.target.value)))},ee=a.username,te=a.mobile,ae=a.surname,ne=a.password,re=a.confirmPassword,se=a.email,ie=a.role,ce=a.isActive;return Object(q.jsx)("div",{children:Object(q.jsxs)(g.ValidatorForm,{onSubmit:X,onError:function(){return null},children:[Object(q.jsxs)(b.a,{container:!0,spacing:6,children:[Object(q.jsxs)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(q.jsx)(k,{type:"text",name:"username",label:"Name",onChange:$,value:ee||"",validators:["required","minStringLength:1","maxStringLength: 100"],errorMessages:["this field is required","this field requires 100 characters","this field requires 100 characters"]}),Object(q.jsx)(k,{type:"email",name:"email",label:"Email",value:se||"",onChange:$,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]}),Object(q.jsx)(k,{name:"password",type:"password",label:"Password",value:ne||"",onChange:$}),Object(q.jsx)(k,{type:"password",name:"confirmPassword",onChange:$,label:"Confirm Password",value:re||""}),Object(q.jsx)(S.a,{children:Object(q.jsxs)(m.a,{component:"fieldset",className:"formControl",children:[Object(q.jsx)(y.a,{component:"legend",children:"Would you like this user to be active"}),Object(q.jsxs)(p.a,{value:ce,name:"userstatus",className:"userstatus","aria-label":"User Status",onChange:$,children:[Object(q.jsx)(O.a,{value:!0,control:Object(q.jsx)(h.a,{}),label:"Active"}),Object(q.jsx)(O.a,{value:!1,control:Object(q.jsx)(h.a,{}),label:"None Active"})]})]})})]}),Object(q.jsxs)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(q.jsx)(k,{type:"text",name:"surname",label:"Surname",onChange:$,value:ae||"",validators:["required","minStringLength:1","maxStringLength: 100"],errorMessages:["this field is required","this field requires 100 characters","this field requires 100 characters"]}),Object(q.jsx)(k,{type:"text",name:"mobile",value:te||"",label:"Mobile Number",onChange:$,validators:["required"],errorMessages:["this field is required"]}),Object(q.jsxs)(S.a,{children:[Object(q.jsxs)(m.a,{component:"fieldset",className:"formControl",children:[Object(q.jsx)(y.a,{component:"legend",children:"Role"}),Object(q.jsxs)(p.a,{value:ie,name:"role",className:"Role","aria-label":"Role",onChange:$,children:[Object(q.jsx)(O.a,{value:"admin",control:Object(q.jsx)(h.a,{}),label:"Admin User"}),Object(q.jsx)(O.a,{value:"hospital",control:Object(q.jsx)(h.a,{}),label:"Hospital User"}),Object(q.jsx)(O.a,{value:"service provider",control:Object(q.jsx)(h.a,{}),label:"Service Provider User"}),Object(q.jsx)(O.a,{value:"driver",control:Object(q.jsx)(h.a,{}),label:"Driver"})]})]}),Object(q.jsx)(b.a,{children:function(e){return"hospital"===e?Object(q.jsx)(P,{open:I,options:L,loading:K,onChange:Y,id:"Hospital",onOpen:function(){return N(!0)},onClose:function(){return N(!1)},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.name===t.name},renderInput:function(e){return Object(q.jsx)(k,Object(c.a)(Object(c.a)({},e),{},{fullWidth:!0,variant:"outlined",label:"Choose Hospital",InputProps:Object(c.a)(Object(c.a)({},e.InputProps),{},{endAdornment:Object(q.jsxs)(s.Fragment,{children:[K?Object(q.jsx)(d.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}):"service provider"===e||"driver"===e?Object(q.jsx)(P,{open:I,options:z,loading:K,onChange:Z,id:"company",onOpen:function(){return N(!0)},onClose:function(){return N(!1)},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.name===t.name},renderInput:function(e){return Object(q.jsx)(k,Object(c.a)(Object(c.a)({},e),{},{fullWidth:!0,variant:"outlined",label:"Choose Service Provider",InputProps:Object(c.a)(Object(c.a)({},e.InputProps),{},{endAdornment:Object(q.jsxs)(s.Fragment,{children:[K?Object(q.jsx)(d.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}):void 0}(ie)})]})]})]}),Object(q.jsxs)(x.a,{color:"primary",variant:"contained",type:"submit",children:[Object(q.jsx)(v.a,{children:"send"}),Object(q.jsx)(f.i,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]})]})})},N=Object(r.a)("div")((function(e){var t=e.theme;return Object(n.a)({margin:"30px"},t.breakpoints.down("sm"),{margin:"16px"})}));t.default=function(){return Object(q.jsx)(s.Fragment,{children:Object(q.jsx)(N,{className:"hospitals-add-user-form",children:Object(q.jsx)(i.k,{title:"Add User",children:Object(q.jsx)(I,{})})})})}}}]);