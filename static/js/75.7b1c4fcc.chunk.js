(this.webpackJsonpBinPack=this.webpackJsonpBinPack||[]).push([[75],{746:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(5),r=a(1),i=a(67),c=a(11),o=a(33),l=a(46),u=a(13),j=a(708),d=a(300),b=a(251),m=a(247),p=a(671),h=a(495),O=a(697),x=a(245),g=a(174),v=a(41),f=a(332),y=a(65),S=a(289),q=a(120),w=a(21),C=a(2),k=Object(n.a)(j.a)((function(){return{}})),_=Object(n.a)(f.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),N=function(){var e=Object(w.e)(),t=Object(r.useState)({date:new Date}),a=Object(u.a)(t,2),n=a[0],i=a[1],j=Object(r.useState)(!1),N=Object(u.a)(j,2),A=N[0],E=N[1],T=Object(r.useState)([e.state.user.company]),I=Object(u.a)(T,2),L=I[0],M=I[1],P=Object(r.useState)(),B=Object(u.a)(P,2),V=B[0],z=B[1],D=A&&0===L.length,F=Object(w.f)();Object(r.useEffect)((function(){var e=!0;if(D)return Object(l.a)(Object(o.a)().mark((function t(){var a,s;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("/hospital",{headers:{"Content-Type":"application/json"}});case 2:a=t.sent,s=a.data.hospitals,console.log(s),e&&(console.log(s),M(s));case 6:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[D,L]),Object(r.useEffect)((function(){A||M([])}),[A]);var H=function(){var t=Object(l.a)(Object(o.a)().mark((function t(a){var s,n,r,i,c,l;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.state.user.is_active,a.target.userstatus.value&&(s=a.target.userstatus.value),n="",r="",void 0===V?(n=e.state.user.company_id,r=e.state.user.company):(n=V.hospital_id,r=V.name),t.prev=5,i=window.localStorage.getItem("accessToken"),console.log("location.state.user._id: "+e.state.user._id),c="/users/"+e.state.user._id,console.log("url: "+c),t.next=12,y.a.patch(c,{name:a.target.username.value,surname:a.target.surname.value,role:a.target.role.value,company:r,company_id:n,is_active:s,phone:a.target.mobile.value,email:a.target.email.value,updated_at:new Date,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 12:l=t.sent,"success"===l.data.status&&F("/netcare/hospital/user"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),console.log("error: "+t.t0);case 20:case"end":return t.stop()}}),t,null,[[5,17]])})));return function(e){return t.apply(this,arguments)}}(),R=function(e){e.persist(),i(Object(c.a)(Object(c.a)({},n),{},Object(s.a)({},e.target.name,e.target.value)))},J=n.username,U=void 0===J?e.state.user.name:J,W=n.mobile,G=void 0===W?e.state.user.phone:W,K=n.surname,Q=void 0===K?e.state.user.surname:K,X=n.email,Y=void 0===X?e.state.user.email:X,Z=n.role,$=void 0===Z?e.state.user.role:Z,ee=n.isActive;return Object(C.jsx)("div",{children:Object(C.jsxs)(f.ValidatorForm,{onSubmit:H,onError:function(){return null},children:[Object(C.jsxs)(d.a,{container:!0,spacing:6,children:[Object(C.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(C.jsx)(_,{type:"text",name:"username",label:"Name",onChange:R,value:U||"",validators:["required","minStringLength:1","maxStringLength: 100"],errorMessages:["this field is required","this field requires 100 characters","this field requires 100 characters"]}),Object(C.jsx)(_,{type:"email",name:"email",label:"Email",value:Y||"",onChange:R,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]}),Object(C.jsx)(k,{open:A,options:L,loading:D,onChange:function(e,t){console.log("newValue"),console.log(t),z(t)},id:"Hospital",onOpen:function(){return E(!0)},onClose:function(){return E(!1)},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.name===t.name},renderInput:function(t){return Object(C.jsx)(_,Object(c.a)(Object(c.a)({},t),{},{fullWidth:!0,variant:"outlined",label:e.state.user.company,InputProps:Object(c.a)(Object(c.a)({},t.InputProps),{},{endAdornment:Object(C.jsxs)(r.Fragment,{children:[D?Object(C.jsx)(b.a,{color:"inherit",size:20}):null,t.InputProps.endAdornment]})})}))}}),Object(C.jsx)(q.a,{children:Object(C.jsxs)(m.a,{component:"fieldset",className:"formControl",children:[Object(C.jsxs)(S.a,{component:"legend",children:["Would you like this user to be active: ",e.state.user.is_active.toString()]}),Object(C.jsxs)(p.a,{value:ee,name:"userstatus",className:"userstatus","aria-label":"User Status",onChange:R,children:[Object(C.jsx)(h.a,{value:!0,control:Object(C.jsx)(O.a,{}),label:"Active"}),Object(C.jsx)(h.a,{value:!1,control:Object(C.jsx)(O.a,{}),label:"None Active"})]})]})})]}),Object(C.jsxs)(d.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(C.jsx)(_,{type:"text",name:"surname",label:"Surname",onChange:R,value:Q||"",validators:["required","minStringLength:1","maxStringLength: 100"],errorMessages:["this field is required","this field requires 100 characters","this field requires 100 characters"]}),Object(C.jsx)(_,{type:"text",name:"mobile",value:G||"",label:"Mobile Number",onChange:R,validators:["required"],errorMessages:["this field is required"]}),Object(C.jsx)(q.a,{children:Object(C.jsxs)(m.a,{component:"fieldset",className:"formControl",children:[Object(C.jsx)(S.a,{component:"legend",children:"Role"}),Object(C.jsxs)(p.a,{value:$,name:"role",className:"Role","aria-label":"Role",onChange:R,children:[Object(C.jsx)(h.a,{value:"hospitals admin",control:Object(C.jsx)(O.a,{}),label:"Hospital Admin"}),Object(C.jsx)(h.a,{value:"hospitals staff",control:Object(C.jsx)(O.a,{}),label:"Hospital Staff"})]})]})})]})]}),Object(C.jsxs)(x.a,{color:"primary",variant:"contained",type:"submit",children:[Object(C.jsx)(g.a,{children:"send"}),Object(C.jsx)(v.i,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]})]})})},A=Object(n.a)("div")((function(e){var t=e.theme;return Object(s.a)({margin:"30px"},t.breakpoints.down("sm"),{margin:"16px"})}));t.default=function(){return Object(C.jsx)(r.Fragment,{children:Object(C.jsx)(A,{className:"hospital-edit-user-form",children:Object(C.jsx)(i.k,{title:"Edit User Details",children:Object(C.jsx)(N,{})})})})}}}]);